<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta charset="UTF-8">
  <title>Business Tycoon</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      color: white;

      background: #0f172a;
      background-image: url('ChatGPT Image Jan 3, 2026, 06_46_16 PM.png');
      background-attachment: fixed;
      background-repeat: no-repeat;
      background-size: cover;
      /* Ensures the image fills the screen */
      background-position: center;
      /* Centers the image */
      background-size: cover;
      background-position: center;

      margin: 0;
      padding: 14px;

      min-height: 100svh;
      /* üî• mobile-safe height */
      overflow-x: hidden;
    }

    .app-header {
      position: sticky;
      top: 0;
      z-index: 999;

      display: flex;
      align-items: center;
      justify-content: space-between;

      padding: 10px 12px;
      margin-bottom: 12px;

      background: rgba(0, 0, 0, 0.55);
      backdrop-filter: blur(10px);
      border-radius: 14px;
    }

    h2,
    h3 {
      text-align: center;
      background: rgba(0, 0, 0, 0.6);
      padding: 12px;
      border-radius: 12px;
    }

    #businessList {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 16px;
      margin-top: 20px;
    }

    .business {
      background: rgba(0, 0, 0, 0.55);
      border-radius: 18px;
      padding: 14px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      min-height: 230px;
      backdrop-filter: blur(6px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
    }

    .coin-pulse {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: linear-gradient(145deg, #facc15, #f59e0b);
      color: #1f2937;
      font-weight: 900;

      display: flex;
      align-items: center;
      justify-content: center;
      margin: 6px 0;

      animation: coinPulse 1.4s infinite ease-in-out;
    }

    .upgradeBtn {
      align-self: flex-start;
      padding: 8px 14px;
      font-size: 13px;
      font-weight: 700;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      background: #f59e0b;
      color: #1f2937;
    }

    .upgradeBtn:hover {
      transform: scale(1.05);
    }

    .upgradeBtn:disabled {
      background: #4b5563;
      color: #9ca3af;
    }

    .addBusinessBtn {
      background: #ff9800;
      border: none;
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
      color: white;
      width: 100%;
    }

    .addBusinessBtn:hover {
      transform: scale(1.02);
    }

    .resetBtn {
      background: #32b3cd;
      border: none;
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
      color: white;
      width: 95px;
      height: 40px;
    }

    .resetBtn:hover {
      transform: scale(1.05);
    }

    .aboutbtn {
      background-color: #3297cd;
      position: absolute;
      margin-left: 10px;
      margin-top: 10px;
      border: none;
      border-radius: 6px;
      height: 30px;
    }

    /* TOOLTIP */
    .aboutbtn::after {
      content: "About Game";
      position: absolute;
      bottom: 30px;
      right: 50%;
      transform: translateX(50%);

      background: rgba(0, 0, 0, 0.55);
      color: white;
      padding: 6px 10px;
      border-radius: 8px;

      font-size: 12px;
      white-space: nowrap;

      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease, transform 0.2s ease;
    }

    /* SHOW ON HOVER */
    .aboutbtn:hover::after {
      opacity: 1;
      transform: translateX(50%) translateY(4px);
    }

    /* PROMO POPUP */
    .promo-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.65);
      backdrop-filter: blur(8px);
      z-index: 99999;
    }

    .promo-card {
      position: relative;
      max-width: 420px;
      margin: 90px auto;
      padding: 28px 22px;
      border-radius: 20px;

      background: linear-gradient(145deg, rgba(255, 255, 255, 0.18), rgba(255, 255, 255, 0.05));
      backdrop-filter: blur(14px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);

      text-align: center;
    }

    .promo-card h1 {
      font-size: 28px;
      margin-bottom: 6px;
    }

    .promo-card h2 {
      font-size: 20px;
      color: #facc15;
      margin-bottom: 14px;
    }

    .promo-card p {
      font-size: 14px;
      line-height: 1.6;
      margin-bottom: 16px;
    }

    .promo-features {
      font-size: 14px;
      margin-bottom: 20px;
      color: #e5e7eb;
    }

    .promo-btn {
      width: 100%;
      padding: 12px;
      border-radius: 14px;
      border: none;
      font-weight: 700;
      font-size: 15px;
      cursor: pointer;

      background: linear-gradient(135deg, #facc15, #f59e0b);
      color: #1f2937;
    }

    .promo-btn:hover {
      transform: scale(1.03);
    }

    .promo-close {
      position: absolute;
      top: 14px;
      right: 16px;
      background: none;
      border: none;
      color: white;
      font-size: 18px;
      cursor: pointer;
    }

    .soundbtn {
      position: absolute;
      top: 15px;
      right: 16px;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      border: none;
      background: #32b3cd;
      color: #facc15;
      font-size: 20px;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 9999;
    }

    .soundbtn:hover {
      transform: scale(1.05);
    }

    @keyframes coinPulse {
      0% {
        transform: scale(0.95);
        box-shadow: 0 0 0 rgba(250, 204, 21, 0.6);
      }

      70% {
        transform: scale(1.15);
        box-shadow: 0 0 18px rgba(250, 204, 21, 0.9);
      }

      100% {
        transform: scale(0.95);
        box-shadow: 0 0 0 rgba(250, 204, 21, 0.6);
      }
    }
  </style>
</head>

<body>

  <button id="resetBtn" class="resetBtn">üîÑReset</button>
  <button id="aboutBtn" class="aboutbtn" aria-label="About Game">‚ÑπÔ∏è</button>
  <button id="soundBtn" class="soundbtn">üîä</button>

  <div id="aboutModal" class="promo-overlay">
    <div class="promo-card">
      <button class="promo-close" id="closeAbout">‚úñ</button>

      <h1>üè¢ Business Tycoon</h1>
      <h2>Build Your Empire</h2>

      <p>
        Earn money every second by investing in businesses.<br>
        Upgrade, unlock, and dominate the market!
      </p>

      <div class="promo-features">
        üí∞ Passive Income<br>
        üìà Business Upgrades<br>
        üîì Unlock New Ventures
      </div>

      <button class="promo-btn">START INVESTING üöÄ</button>
    </div>
  </div>

  <h2>üè¢ Business Tycoon</h2>
  <h3>üí∞ Money: <span id="money"></span></h3>

  <button id="addBusinessBtn" class="addBusinessBtn"></button>
  <div id="lockedBanner" style="
  display:none;
  background: rgba(245, 159, 11, 0.464);
  color:white;
  padding:10px;
  border-radius:8px;
  text-align:center;
  font-weight:700;
  margin-bottom:16px;
">
  </div>

  <div id="businessList"></div>

  <script>

    let isResetting = false;

    const aboutBtn = document.getElementById("aboutBtn");
    const aboutModal = document.getElementById("aboutModal");
    const closeAbout = document.getElementById("closeAbout");

    aboutBtn.onclick = () => {
      aboutModal.style.display = "block";
    };

    closeAbout.onclick = () => {
      aboutModal.style.display = "none";
    };

    aboutModal.onclick = (e) => {
      if (e.target === aboutModal) {
        aboutModal.style.display = "none";
      }
    };

    /* ================== SOUND ================== */
    const gameSound = {
      bgm: new Audio("476546__mrthenoronha__platform-game-theme-loop-2.wav"),
      upgrade: new Audio("656396__nikos34__upgrade-2.wav"),
      unlock: new Audio("810182__mokasza__cash-register-purchase.mp3")
    };

    let soundEnabled = true;
    gameSound.bgm.loop = true;
    gameSound.bgm.volume = 0.25;

    function playSound(type) {
      if (!soundEnabled) return;

      const sound = gameSound[type];
      if (!sound) return;

      sound.currentTime = 0;   // üî• ITO ANG SUSI
      sound.play().catch(() => { });
    }

    function startBGM() {
      if (!soundEnabled) return;

      gameSound.bgm.currentTime = 0;
      gameSound.bgm.play().catch(() => { });
    }

    document.addEventListener("click", startBGM, { once: true });

    const soundBtn = document.getElementById("soundBtn");

    soundBtn.onclick = () => {
      soundEnabled = !soundEnabled;

      if (!soundEnabled) {
        gameSound.bgm.pause();
        soundBtn.textContent = "üîá"; // muted icon
      } else {
        startBGM();
        soundBtn.textContent = "üîä"; // sound on icon
      }
    };

    /* ================== STATE (SAFE LOAD) ================== */
    let money = parseFloat(localStorage.getItem("money"));
    if (isNaN(money)) money = 0;

    let currentBusinessIndex = parseInt(localStorage.getItem("businessIndex")) || 0;
    let ownedBusinesses = JSON.parse(localStorage.getItem("ownedBusinesses")) || [];
    let intervals = [];

    /* ================== ELEMENTS ================== */
    const moneyEl = document.getElementById("money");
    const businessList = document.getElementById("businessList");
    const addBusinessBtn = document.getElementById("addBusinessBtn");
    const resetBtn = document.getElementById("resetBtn");

    /* ================== DATA ================== */
    const businessTypes = [
      { name: "Sari-sari Store", icon: "üè™", income: 10, unlockCost: 0 },
      { name: "Carinderia", icon: "üç≤", income: 25, unlockCost: 1000 },
      { name: "Rice Retailing", icon: "üçö", income: 60, unlockCost: 3000 },
      { name: "Coffee Shop", icon: "‚òï", income: 120, unlockCost: 8000 },
      { name: "Milk Tea Shop", icon: "üßã", income: 150, unlockCost: 9000 },
      { name: "Laundry Shop", icon: "üß∫", income: 500, unlockCost: 20000 },
      { name: "Restaurant", icon: "üçî", income: 2000, unlockCost: 50000 },
      { name: "Car/Motor Parts", icon: "üöó", income: 5000, unlockCost: 80000 },
      { name: "Jollibee", icon: "üçó", income: 100000, unlockCost: 900000 },
      { name: "Gasoline Station", icon: "‚õΩ", income: 250000, unlockCost: 2000000 },
      { name: "Bank", icon: "üè¶", income: 15000000, unlockCost: 120000000 },
      { name: "Real Estate", icon: "üè¢", income: 20000000, unlockCost: 150000000 }
    ];

    /* ================== CORE ================== */
    function saveGame() {
      localStorage.setItem("money", String(money)); // RAW NUMBER ONLY
      localStorage.setItem("businessIndex", String(currentBusinessIndex));
      localStorage.setItem("ownedBusinesses", JSON.stringify(ownedBusinesses));
    }

    function formatMoneyShort(v) {
      if (v >= 1e12) return `‚Ç±${(v / 1e12).toFixed(1)}T`;
      if (v >= 1e9) return `‚Ç±${(v / 1e9).toFixed(1)}B`;
      if (v >= 1e6) return `‚Ç±${(v / 1e6).toFixed(1)}M`;
      if (v >= 1e3) return `‚Ç±${(v / 1e3).toFixed(1)}K`;
      return `‚Ç±${v}`;
    }

    function updateUI() {
      moneyEl.textContent = formatMoneyShort(money);
      updateAddButton();
      updateLockedBanner();
    }

    function updateAddButton() {
      if (currentBusinessIndex >= businessTypes.length) {
        addBusinessBtn.disabled = true;
        addBusinessBtn.textContent = "Congratulations!";
        return;
      }
      const next = businessTypes[currentBusinessIndex];
      addBusinessBtn.disabled = money < next.unlockCost;
      addBusinessBtn.textContent = money >= next.unlockCost
        ? `‚ûï Invest ${next.name} (‚Ç±${next.unlockCost.toLocaleString()})`
        : `${next.name}`;
    }

    function updateLockedBanner() {
      const banner = document.getElementById("lockedBanner");

      if (currentBusinessIndex >= businessTypes.length) {
        banner.style.display = "block";
        banner.textContent = "üéâ All Businesses Unlocked";
        return;
      }

      const next = businessTypes[currentBusinessIndex];

      if (money >= next.unlockCost) {
        banner.style.display = "none"; // üî• HIDE kapag kaya na
        return;
      }

      banner.style.display = "block";
      banner.textContent = `üîí Invest in ${next.name} at ${formatMoneyShort(next.unlockCost)}`;
    }

    /* ================== RENDER ================== */
    function renderBusiness(data) {
      const b = businessTypes[data.index];
      const div = document.createElement("div");
      div.className = "business";

      const upgradeCost = () => b.income * data.level * 10;

      div.innerHTML = `
    <div>
      <h4>${b.icon} ${b.name}</h4>
      <p>Level: <span class="level">${data.level}</span></p>
      <p>Income: <span class="income">${formatMoneyShort(b.income * data.level)}</span>/sec</p>
      <div>
      <div class="coin-pulse">‚Ç±</div>
    </div>
    <button class="upgradeBtn">Upgrade ${formatMoneyShort(upgradeCost())}</button>
  `;

      const levelEl = div.querySelector(".level");
      const incomeEl = div.querySelector(".income"); // üî• ADD THIS
      const upgradeBtn = div.querySelector(".upgradeBtn");


      function refreshUpgrade() {
        upgradeBtn.textContent = `Upgrade ${formatMoneyShort(upgradeCost())}`;
        upgradeBtn.disabled = money < upgradeCost();
      }

      upgradeBtn.onclick = () => {
        const cost = upgradeCost();
        if (money < cost) return;

        money -= cost;
        data.level++;

        playSound("upgrade");

        levelEl.textContent = data.level;
        incomeEl.textContent = formatMoneyShort(b.income * data.level); // üî• FIX

        refreshUpgrade();
        updateUI();
        saveGame();
      };

      const interval = setInterval(() => {
        money += b.income * data.level;

        incomeEl.textContent = formatMoneyShort(b.income * data.level); // üî• SAFE

        updateUI();
        refreshUpgrade();
        saveGame();
      }, 1000);

      intervals.push(interval);
      refreshUpgrade();
      businessList.appendChild(div);
    }

    /* ================== ADD BUSINESS ================== */
    addBusinessBtn.onclick = () => {
      const b = businessTypes[currentBusinessIndex];
      if (money < b.unlockCost) return;
      money -= b.unlockCost;
      const data = { index: currentBusinessIndex, level: 1 };
      ownedBusinesses.push(data);
      currentBusinessIndex++;
      renderBusiness(data);
      playSound("unlock");
      updateUI();
      saveGame();
    };

    /* ================== RESET ================== */
    resetBtn.onclick = () => {
      if (!confirm("Reset all progress?")) return;

      isResetting = true;        // üî• IMPORTANT
      intervals.forEach(clearInterval);
      localStorage.clear();

      location.reload();
    };
    /* ================== INIT ================== */
    ownedBusinesses.forEach(renderBusiness);
    updateUI();
    window.addEventListener("beforeunload", () => {
      if (!isResetting) saveGame();
    });
  </script>

</body>

</html>